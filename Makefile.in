# This is the makefile for Rubber.
# As part of Rubber, it is covered by the GPL (see COPYING for details).
# (c) Emmanuel Beffara, 2002
# (c) Sebastian Kapfer, 2015

all:
	@python@ setup.py build
	cd doc && $(MAKE) all

clean: clean-local
	cd doc && $(MAKE) clean

clean-local:
	rm -rf build tests/tmp
	find . \( -name '*~' -or -name '*.py[co]' \) -delete

distclean: clean-local
	@python@ setup.py rm_sub_files
	rm -f settings.py settings.pyc
	cd doc && $(MAKE) distclean

install:
	@python@ setup.py inst @prefix@

tar:
	git archive --format=tar HEAD | gzip -9 > rubber-@version@.tar.gz
